FROM alpine:3.12
RUN apk add --no-cache bash git wget \
    automake g++ gcc libtool \
    make build-base autoconf \
    tzdata
    # not found: glibtoolize libjalali-dev
SHELL ["/bin/bash", "-c"]
RUN cp /usr/share/zoneinfo/Asia/Tehran /etc/localtime && \
    printf 'Asia/Tehran\n' > /etc/timezone && \
    wget https://raw.githubusercontent.com/davoudarsalani/scripts/master/install-jcal && \
    sed -i 's/--directory/-d/' ./install-jcal && \
    sed -i 's|\(./configure\)$|\1 --disable-dependency-tracking|' ./install-jcal && \
    sed '/PATTERN/,$d'
    chmod +x ./install-jcal
RUN ./install-jcal gnu


## no CNT
# docker run --rm jcal:jdatetime3.7.0-alpine-3.15.0 python -c "import jdatetime; print(jdatetime.datetime.now().strftime('%Y %H:%M'))"

## CNT
# docker run -d -t --name cnt jcal:jdatetime3.7.0-alpine-3.15.0
# docker exec -t cnt python -c "import jdatetime; print(jdatetime.datetime.now().strftime('%Y %H:%M'))"


